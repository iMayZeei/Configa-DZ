Цель работы: Освоить принципы построения лексеров, парсеров и систем трансляции, а также научиться преобразовывать учебный конфигурационный язык (вариант 15) в структурированный формат JSON.

Задачи:

1.Разработать грамматику учебного языка (числа, строки, массивы, словари, константы).
2.Реализовать лексер (разбиение текста на токены).
3.Реализовать парсер (построение структуры данных и обработка констант).
4.Реализовать подстановку констант вида (def NAME value); и ссылок $NAME$.
5.Преобразовать полученную структуру в JSON и вывести в стандартный вывод.
6.Добавить обработку синтаксических ошибок с выводом информативных сообщений.
7.Провести тестирование на нескольких конфигурационных файлах, включая два примера из разных предметных областей.

Используемые технологии:
1.Python 3.13
2.Регулярные выражения: модуль re (лексический анализ).
3.Формирование JSON: модуль json.
4.Работа через терминал (Windows + PyCharm).
5.Файл программы main15.py.
6.Вариант 15.

Полная реализация включает:
1.Функцию tokenize() — разбор текста на токены (двоичные числа 0b..., строки [[...]], ключевые слова array, def, конструкции @{, }, ссылки $name$, запятые, точки с запятой и т.п.);
2.Класс Parser — синтаксический анализ языка и построение внутреннего представления в виде словарей и списков Python;
3.Механизм констант: разбор объявлений (def NAME value);, сохранение значений в словаре consts и подстановку при встрече ссылок $NAME$;
4.Поддержку всех конструкций учебного языка:
– двоичные числа 0b[01][01]+ с переводом в целое число;
– строки в виде [[строка]];
– массивы array( value, value, ... );
– словари @{ name = value; ... };
– вложенные словари и массивы произвольной глубины;
5.Функцию translate_text() / translate_file() — полный цикл «текст конфигурации → внутренняя структура Python»;
6.Сериализацию результата в JSON (json.dumps(..., ensure_ascii=False, indent=2)) и вывод в стандартный поток;
7.Функцию run_tests() с набором тестов, покрывающих числа, строки, массивы, словари, константы и два примера из разных предметных областей (сеть и игра);
8.Функцию main() для работы через командную строку: разбор аргументов -i (входной файл) и --run-tests, вывод ошибок и кода завершения.

Тесты:
--> Программа для запуска: python main15.py ...
1.Запуск встроенных тестов:
python main15.py --run-tests
2.network.txt (сетевой конфиг):
Пример входного файла:
(def default_port 0b1010001011);

@{
name = [[main_server]];
port = $default_port$;
tags = array([[web]], [[prod]]);
}

Команда запуска:
python main15.py -i network.txt

3.game1.txt (игровой конфиг):
Пример входного файла:
(def base_hp 0b1100100);

@{
player = [[Hero]];
hp = $base_hp$;
inventory = array([[sword]], [[potion]]);
}

Команда запуска:
python main15.py -i game1.txt

4.error_test.txt (конфиг для демонстрации синтаксической ошибки):
Пример входного файла (специально без точки с запятой):
@{
port = 0b1010
host = [[no_semicolon]];
}

Команда запуска:
python main15.py -i error_test.txt

Ожидается вывод сообщения о синтаксической ошибке и ненулевой код завершения.

Вывод:
В ходе выполнения работы был разработан полноценный транслятор учебного конфигурационного языка (вариант 15) в формат JSON.



